package objects{	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFormatAlign;	import flash.text.TextFieldType;	import flash.text.AntiAliasType;	import flash.utils.setTimeout;	import core.Mediator;	import phase.GamePhase;	import flash.display.MovieClip;	public class TimerField extends Sprite {		public var time:Number;		private var time_text:TextField; // 時間表示部分		private var tf:TextFormat;				private var limitbar:MovieClip;		//		[Embed(source="../assets/fonts/Fonts.swf", fontName="shinagino")]//		private var embedFont:Class;				public function TimerField() {			time = 0;						var myFont:Shinagino = new Shinagino();						limitbar = new LimitBar();			limitbar.scaleX = limitbar.scaleY = 0.55;			limitbar.limitbar_body.limitbar_yellow.visible = false;			limitbar.limitbar_body.limitbar_red.visible = false;						limitbar.limit_mask.cacheAsBitmap = true;			limitbar.limitbar_body.cacheAsBitmap = true;						limitbar.limitbar_body.mask = limitbar.limit_mask;			time_text = new TextField();			tf = new TextFormat();			tf.align = TextFormatAlign.CENTER;			tf.size = 40;			tf.kerning = true;			tf.letterSpacing = -2;			tf.font = myFont.fontName;			time_text.type = TextFieldType.DYNAMIC;			time_text.defaultTextFormat = tf;			time_text.embedFonts = true;			time_text.width = 250;			time_text.height = 100;			time_text.x = limitbar.width/4;			time_text.y = -time_text.height/4;			time_text.textColor = 0xb4e2da;			time_text.text = time.toFixed(2);						addChild(limitbar);			addChild(time_text);		}				public function start(limit:Number = 30):void {			this.time = limit;			update();		}				private function update():void {			this.time -= 0.07;			if(this.time <= 0){				this.time = 0;				time_text.text = this.time.toFixed(2);				(parent as GamePhase).end();				return;			}			time_text.text = this.time.toFixed(2);						// 時間バーを右に移動			limitbar.limitbar_body.x += limitbar.width/30 * 0.085;			if(this.time <= 10){				limitbar.limitbar_body.limitbar_yellow.visible = false				limitbar.limitbar_body.limitbar_red.visible = true;			} else if(this.time <= 20){				limitbar.limitbar_body.limitbar_blue.visible = false;				limitbar.limitbar_body.limitbar_yellow.visible = true;			}									setTimeout(update, 70);		}				public function destroy():void {			removeChild(time_text);			time_text = null;		}	}}