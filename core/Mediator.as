package core{	import objects.Player;	import objects.Star02;	import flash.display.Stage;	import flash.utils.setTimeout;	public class Mediator {		private static var sx:Number;		private static var sy:Number;				public static var isCollide:Boolean;		public static var collideStar:Star02;		public static var starArr:Vector.<Star02> = new Vector.<Star02>();				private static var _stage:Stage;		private static var player:Player;		public function Mediator() {			// constructor code		}		// 毎フレーム呼びだされる		public static function update():void {			// player 座標の更新			player.x = sx;			player.y = sy;			// すべての星座標の更新			for (var i:uint = 0; i < starArr.length; i++) {				var s:Star02 = starArr[i];				if (s.delete_flag) {					starArr.splice(i, 1);					s.parent.removeChild(s);					continue;				}				if (s.move_flag) {					// 加速度を速度に加算					if (s.vx > 0) {						s.vx +=  s.acceleration;					} else {						s.vx -=  s.acceleration;					}					s.vy +=  s.acceleration;					s.x +=  s.vx;					s.y +=  s.vy;				}				// 画面外に出たら消す処理				if (s.x < -10 || s.x > _stage.stageWidth + 10 || s.y < -10 || s.y > _stage.stageHeight + 10) {					starArr.splice(i, 1);					s.parent.removeChild(s);				}				// プレイヤーとの衝突判定				if (Math.abs(s.x - sx) < 40) {					if (Math.abs(s.y - sy) < 40) {						occurCollision(s);					}				} else {					//endCollision();				}			}		}				public static function occurCollision(star:Star02):void {			player.collideWith();			isCollide = true;			collideStar = star;			setTimeout(endCollision, 300);		}		public static function endCollision():void {			player.defaultState();			isCollide = false;		}				public static function registerStage(s:Stage):void {			_stage = s;		}		public static function addPlayer(p:Player):void {			player = p;		}		public static function get Sx():Number {			return sx;		}		public static function set Sx(value:Number):void {			sx = value;		}		public static function get Sy():Number {			return sy;		}		public static function set Sy(value:Number):void {			sy = value;		}	}}